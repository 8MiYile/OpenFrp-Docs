

# 常见问题

## 为什么穿透速率无法到达标称的最大速率?

我们的限速单位为 Mbps, 即 Megabits per second

单位换算公式为 1 Mbps = 0.125 MB/s ，如您的限速为5Mbps 上行 / 5 Mpbs 下行 ，则您实际可以得到的速率为 0.625 MB/s.

## 为什么不推荐用于 Minecraft 映射

Minecraft 对节点性能影响极为严重，我们 非常不推荐 您使用 OpenFrp 的服务穿透 Minecraft服务器

由于穿透 Minecraft 的用户过多，大部分免费节点的网卡 PPS 都远超出正常值。PPS 达到上限后，即使节点带宽只用了一半，剩下的一半带宽也无法被利用，相当于直接浪费了。

## 节点会有IPV6支持吗

没有！我们所有的节点均不支持使用IPv6进行链接，我们也不会考虑提供IPv6的支持

~~有公网IPv6为何还需要内网穿透呢?~~

## 管理面板打不开的怎么办

这通常是由于各种神秘的网络问题造成的，也可能是我们的服务器遭到了严重的网络攻击，你可以尝试以下办法

- 更换设备访问 (如手机更换为电脑)

- 更换网络环境访问 (如 WiFi 更换为 4G、5G 网络)

- 更换浏览器访问 (推荐使用 Google Chrome / Microsoft Edge / Firefox)

- 查看[状态监控](https://status.openfrp.net/)页面中 #0 OpenFrp - 主站 是否正常

- 查看在 OpenFrp 用户交流群 中是否有故障通知

## 使用 UDP 的游戏无法通过内网穿透访问
- 部分使用 UDP 协议传输数据的游戏服务端要求远程端口与本地配置的端口一致才能正常进行通信。
如果使用 UDP 隧道的游戏正常无法连接，请尝试修改游戏服务器配置文件中的 监听端口，使其与隧道的 远程端口 一致。别忘了编辑隧道把 本地端口 也改成同样的值
- 服务器不允许使用 UDP

## 错误对照表

> **我们推荐使用Ez Startup启动您的隧道,可以避免 下表 大部分问题。**

| 英文 | 中文 | 备注 |
| --- | --- | --- |
| Your `XXX` proxy is available now. Use [`YYY`] to connect. | `XXX` 类型隧道启动成功 使用 [`YYY`] 来连接到你的隧道 | 隧道启动成功，一切正常 |
| Recover success: [`XXX`] | 不断线重连成功: [`XXX`] | 网络波动，一般可以忽略或更换节点 |
| recover to server timed out | 不断线重连失败 | 网络波动，frpc 会自动尝试另外一种重连方式，一般可以忽略或更换节点 |
| Connection recover failed: `XXX` | 不断线重连失败: `XXX` | 网络波动，frpc 会自动尝试另外一种重连方式，一般可以忽略或更换节点 |
| read from control connection EOF | 控制连接读取失败 (EOF), 可能是网络不稳定 | 网络波动，一般可以忽略或者更换节点 |
| write message to control connection error: `XXX` | 控制连接写入失败, 可能是网络不稳定: `XXX` | 网络波动，一般可以忽略或者更换节点 |
| login to server failed: `XXX` | 登录节点失败, 请检查网络连接: `XXX` | [点此查看详细说明](#登录节点失败-请检查网络连接) |
| connect to local service [`XXX`] error: `YYY` | 连接映射目标 [`XXX`] 失败, 请检查本地服务是否打开: `YYY` | [点此查看详细说明](#无法连接到本地服务) |
| proxy conflict | *隧道冲突* | 该问题是由于隧道重复开启造成的，请查找 **所有设备** 上的 frpc 进程并关闭重复开启的隧道。如果此问题持续存在，请尝试重置访问密钥 |
| multi-instance racing, this one failed | *多实例竞争* | 该问题是 frpc 重复开启且生成了相同的 RunID，在 frps 上争抢同一个隧道造成的。请在 **当前设备** 上查找所有存在冲突的 frpc 进程并关闭，或检查 supervisor 配置是否有误 |
| port already used | *服务端端口被占用* | 换一个远程端口 |
| router config conflict | *URL 路由冲突* | [点此查看详细说明](#URL 路由冲突) |
| Request failed: `XXX` `YYY` | *API 请求失败* | [点此查看详细说明](#API 请求失败) |


## 登录节点失败, 请检查网络连接

1. 请运行 PING 命令测试节点连通性 (Windows)

   ```bash
   ping <节点域名>

   # 例如
   ping cn-shanghai.openfrp.top
   ```

1. 请查看 [节点状态](https://status.openfrp.net/) 页面对应节点是否在线

| 节点在线 | PING 测试 | 可能原因 | 解决方案 |
| :---: | :---: | --- | --- |
| ✘ | ✘ | 节点被攻击或故障 | 换节点 / 等待恢复 |
| ✔ | ✘ | 网络故障 | 换节点 / 换网络 |
| ✔ | ✘ | 节点被 GFW 屏蔽了 | 换节点 |
| ✔ | ✔ | 上游防火墙拦截 FRP 协议或 7000 / 7001 端口 | 换网络 / 找别家 |

## URL 路由冲突

| 原因 | 解决方案 |
| --- | --- |
| 创建隧道时填写的域名有误 | 填写正确的域名 |
| 服务端路由未释放 | 和 [端口被占用](#服务端端口被占用) 类似，解决方案也相同 |
| **高级设置** 中 URL 路由配置错误 | 您是高级用户，请自行寻找解决方案<br>如果是不小心填写的，请删掉相关配置项 |

## 服务端端口被占用

| 原因 | 解决方案 |
| --- | --- |
| 隧道刚刚被关闭 | 启动器: **关闭隧道** <br> FRPC: **退出 FRPC** <br> 等待 **一分钟** 后重新开启 |
| 存在 FRPC 进程残留 | 启动器: 右键点击托盘图标, **彻底退出** 后重新打开启动器 <br> frpc: 打开 **任务管理器** 查找并 **关闭** 残留的 FRPC 进程 |
| 重复开启隧道 | 一条隧道同一时间只能在一个地方开启<br>请 **关闭重复开启的隧道** 并 **创建不同端口的隧道** 使用 |

## 无法连接到本地服务

此日志说明 **FRPC 工作正常**，但是 FRPC 无法连接到您的本地服务。

| 原因 | 解决方案 |
| --- | --- |
| 本地服务 (例如 Minecraft 服务器，HTTP 服务器) 没有启动或启动失败 | 检查并启动本地服务 |
| 本地服务配置有误，没有监听 frpc 连接的本地 IP | 正确配置本地服务或修改隧道设置 |
| **本地端口** 或 **本地 IP** 填写错误 | 编辑隧道，参考文档 **填写正确的信息** 然后 **重启 frpc** |
| **本地 IP** 发生了变化 | 重新检查本地地址，然后编辑隧道 **填写正确的本地 IP** 并 **重启 FRPC** |
| 防火墙、杀毒软件拦截 FRPC 请求本地服务 | 添加合理的白名单规则到防火墙、杀毒软件中 |

## API 请求失败

请优先检查 API 连接性问题:

- 检查 SSL 问题 (一般不存在)
  - Windows 系统请使用 **Edge 等现代浏览器** 访问 `http://of-dev-api.bfsea.xyz/` 查看是否出现安全警告，如果出现请安装系统更新或者手动安装根证书
  - Linux 系统可以使用 `tcping http://of-dev-api.bfsea.xyz/` 检查是否存在证书错误，如果出现证书错误可以尝试安装 (或更新) `ca-certificates` 包
- 检查防火墙、杀毒软件是否拦截了 FRPC 的请求
- 检查宽带是否存在到期未续费等情况，电脑能否正常 **打开网站**（例如 Bing）

如果还是没有什么头绪，可以查看 [外部状态监控](https://status.openfrp.net/) 中 API 是否正常在线 (<span style="color: #3bd671">**Online**</span>)，如果不在线请联系管理员。


## 你能告诉我哪个节点最好用吗？
**不可以**， 节点速度受以下因素影响：

- 该节点的使用人数
- 节点到客户端的物理距离
- 节点到客户端的网络状况
- 客户端、节点的网络环境差异
- 国家政策
- 部分不可抗力因素
- 某些人的恶意攻击

> 送某些人一句话：如果有 10% 的利润，它就保证到处被使用；有 20% 的利润，它就活跃起来；有 50%的利润,它就铤而走险；为了 100% 的利润，它就敢践踏一切人间法律；有 300% 的利润，它就敢犯任何罪行，甚至绞首的危险。

>提示
<br>OpenFrp支持 FRP 官方最新版本以及其他的 FRP 发行版本，您可以前往任意站点下载任意版本的 FRP 客户端(0.18以上版本)。 如果该客户端支持编辑 FRPC 配置文件，则该 FRP 客户端可以使用 OpenFrp ,使用方法与普通配置文件版本客户端相同！
<bR>注意：请从您所信任的站点下载非Openfrp提供的 FRPC 程序，如 [FRP 的官方 Github 的发行版本](https://github.com/fatedier/frp/releases/) 等，我们不能保证您通过非 Openfrp 下载的 FRPC 程序没有恶意行为！

## FRP 的兼容性
我们的服务兼容 上游开源版本 的客户端 0.18.0+ 。

> **我们推荐使用Ez Startup启动您的隧道,可以避免 [错误列表中](#错误对照表) 大部分问题。**

也就是说您可以使用几乎任何现有(只要支持 -c 参数)的 FRP 客户端来使用我们的服务，只需根据隧道的「配置文件」手动填写关键连接参数，或直接复制配置文件启动即可

如果您是使用 Windows XP 或 Windows Vista 的极客用户，请使用上游的 [0.28.2](https://github.com/fatedier/frp/releases/tag/v0.28.2) 版本 。

使用任何非本网站分发的最新版客户端，均视为放弃相关支持，由此带来的任何问题请您发扬极客精神自行解决。

## 怎么进行实名验证
1. 进入[OpenFrp管理面板 - 个人中心](https://www.openfrp.net/home/user)
2. 点击 "实名验证"
3. 提交 您的身份证信息

> OpenFrp 如果发现您使用网络上的身份证号码进行实名，我们将有权要求您提供身份证照片，如无法提供，我们将按照用户协议进行处置.<br>

如果您为以下用户，您可以与我们进行真人验证。
- 中国香港、中国台湾用户。
- ~~没有大陆身份证号码的的外国人 (I think you have Public IP)~~


## 我提交的实名信息安全吗

我们会严格按照国家相关法律法规进行保存数据，并遵守本站的**隐私策略**进行保存等操作


# 安全实践

## 为什么要注重于安全
如下图,我们不指望发生这样的事。
![为什么？](./public/leakAfter.png)

安全在于你的数据之中，也许是一次家庭合照,或者你的密码集合。

若不做任何措施,必有小贼无所事事。

## 安全准则
- 对于暴露在网络上的任何东西，密码一定要足够强
- 保持谦逊是美德，也是保护您不被人攻击的隐身咒
- 如果您知道一个东西以漏洞闻名，那就为它多加防护
- 如果没有特殊需求，使用最新版程序通常都是一个好选择
- 尤其是当您使用诸如 WordPress 这类历史悠久的项目时，您遇到陈年老代码带来漏洞的可能性将急速升高
- 请务必打开各个程序自带的更新检测，并总在第一时间进行更新


## 远程桌面安全提示
映射远程桌面通常会带来出人意料的风险，因为巨硬的漏洞总是很多

如果您需要映射远程桌面，我们强烈建议您启用 Windows Update 来避免批量 0day 利用使得您的电脑遭到攻击，出现 WannaCry 等这样的悲剧。
并设置强密码，而不是使用例如下面的这些 账户 / 密码。
| 账户 | 密码 |
| --- | --- |
| Administrator | 无 |
| Administrator | 123456 |
| root | password |
| Administrator | (密码在提示中) |
| ... | 键盘上的连续字母 / 数字 |

系统更新是您的朋友，不是敌人。 如果说有一个东西总是能在暴露的风险中拯救您，那一定是系统更新。

系统更新可能会迟到，但是只要到达，它总是能为守护您的电脑奉上您需要的力量。

如果您因为一些理由关闭了系统更新，请不要以任何形式把自己暴露在网络中，且必要的安装杀软。

## 获取访问者的真实 IP

也许您会将 FRP 用在映射您的网站服务，大概率也可能带着 账户登录。

正常的 FRP 映射不需要进行如题操作，而账户操作大部分情况需要获取访问者真实 IP (避免盗号操作)。

目前，可用的方案有如下两种。
- X-Forwarded-For 访问头
- Proxy Protocol


### XFF 请求头

> 该方案仅适用于 HTTP 隧道，不适用于 HTTPS、TCP、UDP 等隧道，所以推荐方案 2

使用 HTTP 隧道时，FRPC 会自动将客户端的请求 IP 追加到 X-Forwarded-For 尾部，您的应用程序可以通过读取这两个请求头来获取客户端真实 IP。您可以参考 MDN 文档 获取更多信息。

请注意，XFF 头的前半部分是 用户完全可控 的，因此 前面的数据并不可靠。我们推荐您只读取最后一个 IP，并且总是做好数据过滤以防出现安全问题。

``` 
# 格式说明
X-Forwarded-For: <client>, <proxy1>, ...,<连接到 FRPC 的 IP>

# 例如:
X-Forwarded-For: 127.0.0.1
X-Forwarded-For: 127.0.0.1; openfrp , 114.5.1.4
```

### Proxy Protocol

> 使用该方案时必须在本地服务也做相应的配置，只修改 FRP 配置会造成 隧道完全不可用。

Proxy Protocol 是由 HAProxy 开发者 Willy 提出的一种反向代理协议，目前已被广泛支持。您可以参考 [HAProxy 文档](http://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) 获取更多信息。

在隧道配置中启用**高级设置**并添加如下自定义配置后，FRPC 就会在请求本地服务时应用 HAProxy 协议：
```
proxy_protocol_version = <v1|v2>
```
目前 Proxy Protocol 有两个版本：v1 和 v2，请先调查您所使用的本地服务支持哪个版本再进行配置。如果两个版本都支持的，我们推荐您使用 v2 以提高传输效率。

![](/public/launcherProxy.png)



